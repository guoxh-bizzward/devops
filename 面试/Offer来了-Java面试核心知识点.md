# JVM

## JVM 运行机制

jvm是运行Java字节码的虚拟机,包括

* 字节码指令集
* 程序寄存器
* 虚拟机栈
* 虚拟机堆
* 方法区
* 垃圾回收区

Java程序的具体运行过程

1. java源文件被编译器编译成字节码文件
2. JVM将字节码文件编译成相应操作系统的机器码
3. 机器码调用相应操作系统的本地方法库执行相应的方法

Java虚拟机包括

* 类加载器子系统(Class loader SubSystem) 将编译好的.class文件加载到JVM中
* 运行时数据区(Runtime Data Area) 存储在JVM运行过程中产生的数据,包括程序计数器,方法区,本地方法区,虚拟机栈和虚拟机堆
* 执行引擎 包括即时编译器和垃圾回收器,即时编译器用于将java字节码编译成具体的机器码,垃圾回收器用于回收再运行过程中不再使用的对象
* 本地接口库(Native Interface Libary).本地接口库通过调用本地方法库(Native Method Libary)与操作系统交互.

## 多线程

在JVM后台运行的线程主要有以下几个:

* 虚拟机线程(JVM Thread): 虚拟机线程在JVM到达安全点(SafePoint)时出现;
* 周期性任务线程:通过定时器调线程来实现周期性操作的执行
* GC线程:GC线程支持JVM中不同的垃圾回收活动
* 编译器线程:编译器线程在运行时将字节码动态编译成本地平台机器码,是JVM跨平台的具体体现
* 信号分发器线程:接收发送到JVM信号并调用JVM方法

## JVM的内存区域

JVM内存区域分为线程私有区域(程序计数器,虚拟机栈,本地方法区),线程共享区域(虚拟机堆,方法区)和直接内存

直接内存又叫做堆外内存,它不是JVM运行时数据区的一部分.但是在并发编程中被频繁使用.JDK的NIO模块提供的基于channel和buffer的I/O操作方式就是基于堆外内存实现的,NIO通过调用native函数直接在操作系统上分配堆外内存,然后使用DirectoryByteBuffer对象作为这块内存的引用对内存进行操作

```
Java进程可以通过堆外内存基数避免在Java堆和Native堆中来回复制数据带来的资源占用和性能消耗,因此堆外内存在高并发应用场景下被广泛应用(Netty,Flink,HBase,Hadoop都有使用堆外内存) 
```



## JVM 的运行时内存



## 垃圾回收与算法



## Java中的4种引用类型



## 分代收集算法和分区收集算法



## 垃圾收集器



## Java 网络编程模型



## JVM 类加载机制

