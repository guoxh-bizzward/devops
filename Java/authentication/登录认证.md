# 登录认证

现在流行的两种登录认证方式

* Session
* JWT

无论那种认证方式其原理都是token机制,即保存凭证.

1. 前端发起登录认证请求
2. 后端登录验证通过,返回给前端一个凭证
3. 前端发起新的请求时携带凭证

## Session

session 是一种有状态的会话管理机制,其目的是为了解决Http无状态请求带来的问题

当用户登录认证请求通过时,服务端会将用户的信息存储起来,并生成一个session Id发送给前端,前端将这个session id保存起来(一般是存在cookie中).之后前端再发送请求时都携带session Id,服务器端再根据这个session Id 来检查这个用户是否登录.

每一个sessionId都对应一个httpSession对象,然后服务器就根据你这个httpSession对象来检测你这个客户端是否已经登录.

### 上下文

在某些情况下,就算加了过滤器我们还是不能在controller层将session代码去掉,因为在实际业务中对用户操作时非常常见的.

可以通过springMVC提供的`RequestContextHolder`对象在程序任何地方获取当前请求对象,从而获取我们保存在session中的用户对象.



## JWT

JWT(Json Web Token)

1. 可以将一段数据加密成一段字符串,也可以从这字符串解密回数据;
2. 可以对这个字符串进行校验,比如有没有过去,有没有被篡改;

当用户登录成功的时候,服务器生成一个JWT字符串返回给浏览器,浏览器将JWT保存起来,在之后的请求中都携带JWT,服务器再对这个JWT进行校验,校验通过的话就代表这个用户登录了.



JWT和Session的一个重要区别就是 session是有状态的,JWT是无状态的.也就是说session在服务端保存了用户信息,而JWT在服务端没有保存任何信息.

